<section data-ng-controller='ListingController'>
	<div class="form-group alert alert-danger ww" ng-show='error != null'>{{ error }}</div>
	<div class="form-group alert alert-success ww" ng-show='success != null'>{{ success }}</div>

	<div class="row">
	  <div class="col-lg-3">
	    <div class="input-group">
	      <input ng-model='search_text' name='search_text' type="text" class="form-control" placeholder='Search'>
	      <span class="input-group-btn">
	        <!-- <button ng-click='reset()' class="btn btn-default" type="button"><i class='glyphicon glyphicon-search'></i></button> -->
	        <button ng-click='search_text=""; reset()' ng-disabled='!search_text' type='submit' class='btn'>Reset</button>
	      </span>
	    </div><!-- /input-group -->
	  </div><!-- /.col-lg-6 -->
	</div><!-- /.row -->

	<br/>

	<table class='table table-bordered'>
		<thead>
			<th>No.
			</th>
			<th><a  href='' ng-click='sort("text")'>Description</a>
				<span ng-show='sort_field=="text" && is_desc==true'><i class='glyphicon glyphicon-arrow-down'></i></span>
				<span ng-show='sort_field=="text" && is_desc==false'><i class='glyphicon glyphicon-arrow-up'></i></span>
			</th>
			<th><a href='' ng-click='sort("category")'>Category</a>
				<span ng-show='sort_field=="category" && is_desc==true'><i class='glyphicon glyphicon-arrow-down'></i></span>
				<span ng-show='sort_field=="category" && is_desc==false'><i class='glyphicon glyphicon-arrow-up'></i></span>
			</th>
			<th><a href='' ng-click='sort("price")'>Price</a>
				<span ng-show='sort_field=="price" && is_desc==true'><i class='glyphicon glyphicon-arrow-down'></i></span>
				<span ng-show='sort_field=="price" && is_desc==false'><i class='glyphicon glyphicon-arrow-up'></i></span>
			</th>
			<th><a href='' ng-click='sort("updated_at")'>Last Posted</a>
				<span ng-show='sort_field=="updated_at" && is_desc==true'><i class='glyphicon glyphicon-arrow-down'></i></span>
				<span ng-show='sort_field=="updated_at" && is_desc==false'><i class='glyphicon glyphicon-arrow-up'></i></span>
			</th>
			<th>
				<a href="/#/new"><i class='glyphicon glyphicon-plus' /></a>
			</th>
		</thead>
		<tbody>
			<tr ng-repeat='listing in listings | filter:search_text' id='listing_{{ listing._id }}'>
				<td>{{ $index + 1 }}</td>
				<td>{{ listing.text }}</td>
				<td>{{ listing.category }}</td>
				<td>{{ listing.price }}</td>
				<td ng-class='{ green: is_green(listing.updated_at), yellow: is_yellow(listing.updated_at), red: is_red(listing.updated_at) }'>
					{{ listing.updated_at | date:'dd MMM yyyy HH:mm:ss' }}
				</td>
				<td>
					<a href='' ng-click='remove()'><i class='glyphicon glyphicon-remove' /></a>
					<a href='' ng-click='update()'><i class='glyphicon glyphicon-ok-sign' /></a>
				</td>
			</tr>
		</tbody>
	</table>
</section>